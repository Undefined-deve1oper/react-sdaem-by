"use strict";(self.webpackChunksdaem_by=self.webpackChunksdaem_by||[]).push([[796],{2914:function(e,t,n){n.d(t,{Z:function(){return s}});n(2791);var r=n(184),s=function(e){var t=e.children,n=e.className;return(0,r.jsx)("section",{className:n,children:(0,r.jsx)("div",{className:n+"__container _container",children:t})})}},7796:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(2791),s=n(3884),a=n(2914),i=n(5928),o=n(9439),c=n(7689),l=n(1087),d=n(5957),u=n(2455),h=n(7738),m=n(8254),f=n(4289),p=n(2089),w=n(184),_=function(e){var t=e.comments,n=e.onAnswer,r=(0,m.ZO)(t,{path:"createdAt",order:"desc"}).sortedItems,s=(0,m.ui)(r||[],3,1),a=s.itemsListCrop,i=s.handlePageChange,o=s.page,c=null===t||void 0===t?void 0:t.length;return(0,w.jsxs)("div",{className:"estate-comments__reviews",children:[t.length>0?(0,w.jsxs)("ul",{className:"estate-comments__list",children:[(0,w.jsx)("h3",{className:"estate-comments__title",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),a.map((function(e){return(0,w.jsx)("li",{className:"estate-comments__item",children:(0,w.jsx)(p.Z,{comment:e,onAnswer:n})},e._id)}))]}):(0,w.jsx)("p",{className:"estate-comments__warning",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0437\u044b\u0432\u043e\u0432 \u043f\u0443\u0441\u0442"}),c>3&&(0,w.jsx)(f.Z,{currentPage:o,onPageChange:i,itemsCount:t.length,pageSize:3})]})},v=n(7033),j=function(e){var t=e.value,n=(0,r.useState)({}),s=(0,o.Z)(n,2),a=s[0],i=s[1];return(0,r.useEffect)((function(){var e=setTimeout((function(){var e={opacity:1,width:"".concat(t,"%")};i(e)}),250);return function(){clearTimeout(e)}}),[t]),(0,w.jsx)("div",{className:"progress",children:(0,w.jsx)("span",{className:"progress__done",style:a})})},x=function(){var e=(0,c.UO)().estateId,t=(0,d.Js)((0,v.Pq)(e||"")),n=function(e,t){var n=0;e.forEach((function(e){t===Math.round(+e)&&(n+=1)}));var r=n/(e.length/100);return r||0};return t?(0,w.jsx)("ul",{className:"estate-comments__stat comments-stats",children:[5,4,3,2,1].map((function(e){return(0,w.jsxs)("li",{className:"comments-stats__item",children:[(0,w.jsx)("span",{className:"comments-stats__rate",children:e}),(0,w.jsx)("div",{className:"comments-stats__bar",children:(0,w.jsx)(j,{value:n(t,e)})})]},e)}))}):null},g=function(){var e=(0,c.UO)().estateId,t=(0,d.Js)((0,u.V$)(e)),n=(0,d.Js)((0,d.M7)()),s=(0,r.useState)(""),a=(0,o.Z)(s,2),i=a[0],m=a[1];return t?(0,w.jsxs)("section",{className:"comments",children:[(0,w.jsx)("h2",{className:"comments__title",children:"\u041e\u0442\u0437\u044b\u0432\u044b \u043d\u0430\u0448\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"}),(0,w.jsxs)("div",{className:"estate-comments",children:[(0,w.jsxs)("div",{className:"estate-comments__main",children:[n?(0,w.jsx)("div",{className:"estate-comments__form",children:(0,w.jsx)(h.CV,{answerOn:i})}):(0,w.jsxs)("p",{className:"estate-comments__error",children:["\u0414\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0442\u0437\u044b\u0432\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e"," ",(0,w.jsx)(l.OL,{to:"/login/signin",className:"estate-comments__error _link",children:"\u0432\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]}),(0,w.jsx)("div",{className:"estate-comments__items",children:(0,w.jsx)(_,{onAnswer:function(e){m(e)},comments:t})})]}),(0,w.jsxs)("div",{className:"estate-comments__statistics comments-statistics",children:[(0,w.jsx)("h2",{className:"comments-statistics__title",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043e\u0442\u0437\u044b\u0432\u0430\u043c"}),(0,w.jsx)("div",{className:"comments-statistics__bar",children:(0,w.jsx)(x,{})})]})]})]}):null},b=n(4282),y=n(8807),N=n(2297),k=n(7284),O=n(693),C=n(8640),S=n(1071),P=n(7075),Z=function(){var e=(0,c.TH)().pathname,t=(0,c.UO)().estateId,n=(0,d.Js)((0,v.hF)(t)),s=(0,d.Js)((0,v.Pq)(t||"")),a=(0,m.lZ)(t||""),o=a.isFavourite,u=a.handleSelectFavorite,h=(0,d.Js)((0,d.rc)());if((0,r.useEffect)((function(){window.scrollTo(0,0)}),[e]),n&&s){var f=(0,b.q8)(n.createdAt),p=(0,b.q8)(n.updatedAt);return(0,w.jsx)("div",{className:"estate-detail",children:(0,w.jsxs)("div",{className:"estate-detail__welcome",children:[(0,w.jsxs)("div",{className:"estate-detail__row",children:[(0,w.jsx)("div",{className:"estate-card__functions",children:h===n.info.ownerId&&(0,w.jsx)(l.OL,{to:"/estates/".concat(n._id,"/edit"),className:"estate-card__edit",children:(0,w.jsx)(k.Z,{name:"edit"})})}),(0,w.jsx)("div",{className:"estate-detail__slider",children:(0,w.jsx)(C.Z,{items:n.images,pagination:{clickable:!0},grabCursor:!0,className:"estate-detail__slide"})}),(0,w.jsxs)("div",{className:"estate-detail__info",children:[(0,w.jsxs)("div",{className:"estate-detail__header",children:[(0,w.jsx)("h1",{className:"estate-detail__title",children:n.title}),(0,w.jsxs)("div",{className:"estate-card__price",children:[(0,w.jsxs)("span",{children:[n.price," RUB"]}),"\u0437\u0430 \u0441\u0443\u0442\u043a\u0438"]})]}),(0,w.jsxs)("div",{className:"estate-detail__main",children:[(0,w.jsxs)("div",{className:"estate-detail__location",children:[(0,w.jsx)(k.Z,{name:"mark"}),n.location]}),(0,w.jsx)("div",{className:"estate-detail__rating",children:(0,w.jsx)(O.Z,{name:"rating",readOnly:!0,defaultState:(0,y._)(s)})})]}),(0,w.jsxs)("div",{className:"estate-detail__footer",children:[(0,w.jsx)(N.Z,{label:"\u0412 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438",status:o||!1,onToggle:u}),(0,w.jsx)(P.Z,{estatesPage:!0,url:"https://github.com/Undefined-deve1oper/react-sdaem-by"})]})]}),(0,w.jsxs)("div",{className:"estate-detail__dates",children:[(0,w.jsxs)("p",{className:"estate-detail__text",children:["\u0414\u0430\u0442\u0430 \u043f\u043e\u0434\u0430\u0447\u0438: ",f]}),(0,w.jsxs)("p",{className:"estate-detail__text",children:["\u0414\u0430\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f: ",p]})]}),(0,w.jsxs)("div",{className:"estate-detail__description",children:[(0,w.jsx)("div",{className:"estate-detail__subtitle",children:"\u041e \u0422\u043e\u0432\u0430\u0440\u0435"}),(0,w.jsx)("p",{children:n.description})]}),(0,w.jsx)(i.AN,{data:n.info})]}),(0,w.jsx)("div",{className:"estate-detail__owner",children:(0,w.jsx)(S.Z,{ownerId:n.info.ownerId})})]})})}return(0,w.jsx)("h1",{children:"Loading..."})},E=function(){return(0,w.jsxs)(a.Z,{className:"estate-page",children:[(0,w.jsx)(s.ZP,{}),(0,w.jsx)(Z,{}),(0,w.jsx)(i.is,{}),(0,w.jsx)(g,{})]})}},7075:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(2791),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(e){function t(t){var n=e.call(this,t)||this;return n.name="AssertionError",n}return s(t,e),t}(Error);function i(e,t){if(!e)throw new a(t)}function o(e){var t=Object.entries(e).filter((function(e){var t=e[1];return void 0!==t&&null!==t})).map((function(e){var t=e[0],n=e[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(String(n)))}));return t.length>0?"?".concat(t.join("&")):""}var c=n(1694),l=n.n(c),d=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},u.apply(this,arguments)},h=function(e,t,n,r){return new(n||(n=Promise))((function(s,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function o(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(o){a=[6,o],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},p=function(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then},w=function(e,t){return{left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-e/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-t/2}},_=function(e,t){return{top:(window.screen.height-t)/2,left:(window.screen.width-e)/2}};var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openShareDialog=function(e){var n=t.props,r=n.onShareWindowClose,s=n.windowHeight,a=void 0===s?400:s,i=n.windowPosition,o=void 0===i?"windowCenter":i,c=n.windowWidth,l=void 0===c?550:c;!function(e,t,n){var r=t.height,s=t.width,a=f(t,["height","width"]),i=u({height:r,width:s,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},a),o=window.open(e,"",Object.keys(i).map((function(e){return"".concat(e,"=").concat(i[e])})).join(", "));if(n)var c=window.setInterval((function(){try{(null===o||o.closed)&&(window.clearInterval(c),n(o))}catch(e){console.error(e)}}),1e3)}(e,u({height:a,width:l},"windowCenter"===o?w(l,a):_(l,a)),r)},t.handleClick=function(e){return h(t,void 0,void 0,(function(){var t,n,r,s,a,i,o,c,l,d;return m(this,(function(u){switch(u.label){case 0:return t=this.props,n=t.beforeOnClick,r=t.disabled,s=t.networkLink,a=t.onClick,i=t.url,o=t.openShareDialogOnClick,c=t.opts,l=s(i,c),r?[2]:(e.preventDefault(),n?(d=n(),p(d)?[4,d]:[3,2]):[3,2]);case 1:u.sent(),u.label=2;case 2:return o&&this.openShareDialog(l),a&&a(e,l),[2]}}))}))},t}return d(t,e),t.prototype.render=function(){var e=this.props,t=(e.beforeOnClick,e.children),n=e.className,s=e.disabled,a=e.disabledStyle,i=e.forwardedRef,o=(e.networkLink,e.networkName),c=(e.onShareWindowClose,e.openShareDialogOnClick,e.opts,e.resetButtonStyle),d=e.style,h=(e.url,e.windowHeight,e.windowPosition,e.windowWidth,f(e,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","networkLink","networkName","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","url","windowHeight","windowPosition","windowWidth"])),m=l()("react-share__ShareButton",{"react-share__ShareButton--disabled":!!s,disabled:!!s},n),p=u(u(c?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},d),s&&a);return r.createElement("button",u({},h,{"aria-label":h["aria-label"]||o,className:m,onClick:this.handleClick,ref:i,style:p}),t)},t.defaultProps={disabledStyle:{opacity:.6},openShareDialogOnClick:!0,resetButtonStyle:!0},t}(r.Component),j=v,x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},x.apply(this,arguments)};var g=function(e,t,n,s){function a(a,i){var o=n(a),c=x({},a);return Object.keys(o).forEach((function(e){delete c[e]})),r.createElement(j,x({},s,c,{forwardedRef:i,networkName:e,networkLink:t,opts:n(a)}))}return a.displayName="ShareButton-".concat(e),(0,r.forwardRef)(a)};var b=g("vk",(function(e,t){var n=t.title,r=t.image,s=t.noParse,a=t.noVkLinks;return i(e,"vk.url"),"https://vk.com/share.php"+o({url:e,title:n,image:r,noparse:s?1:0,no_vk_links:a?1:0})}),(function(e){return{title:e.title,image:e.image,noParse:e.noParse,noVkLinks:e.noVkLinks}}),{windowWidth:660,windowHeight:460});var y=g("facebook",(function(e,t){var n=t.quote,r=t.hashtag;return i(e,"facebook.url"),"https://www.facebook.com/sharer/sharer.php"+o({u:e,quote:n,hashtag:r})}),(function(e){return{quote:e.quote,hashtag:e.hashtag}}),{windowWidth:550,windowHeight:400});var N=g("viber",(function(e,t){var n=t.title,r=t.separator;return i(e,"viber.url"),"viber://forward"+o({text:n?n+r+e:e})}),(function(e){return{title:e.title,separator:e.separator||" "}}),{windowWidth:660,windowHeight:460});var k=g("telegram",(function(e,t){var n=t.title;return i(e,"telegram.url"),"https://telegram.me/share/url"+o({url:e,text:n})}),(function(e){return{title:e.title}}),{windowWidth:550,windowHeight:400});var O=g("whatsapp",(function(e,t){var n=t.title,r=t.separator;return i(e,"whatsapp.url"),"https://"+(/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)?"api":"web")+".whatsapp.com/send"+o({text:n?n+r+e:e})}),(function(e){return{title:e.title,separator:e.separator||" "}}),{windowWidth:550,windowHeight:400}),C=n(7284),S=n(184),P=function(e){var t=e.url,n=e.title,r=e.image,s=e.estatesPage,a=e.postsPage,i=function(){return s?"share__item estates-detail":a?"share__item posts-detail":"share__item"};return(0,S.jsxs)("div",{className:"share",children:[(0,S.jsx)("h3",{className:"share__title",children:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"}),(0,S.jsxs)("div",{className:"social",children:[(0,S.jsx)(b,{url:t,title:n,image:r,className:i(),children:(0,S.jsx)(C.Z,{name:"vk",svgClass:"share__icon"})}),(0,S.jsx)(y,{url:t,title:n,hashtag:"#daily rent...",className:i(),children:(0,S.jsx)(C.Z,{name:"fb",svgClass:"share__icon"})}),(0,S.jsx)(N,{url:t,title:n,className:i(),children:(0,S.jsx)(C.Z,{name:"viber",svgClass:"share__icon"})}),(0,S.jsx)(k,{url:t,title:n,className:i(),children:(0,S.jsx)(C.Z,{name:"telegram",svgClass:"share__icon"})}),(0,S.jsx)(O,{url:t,title:n,className:i(),children:(0,S.jsx)(C.Z,{name:"whatsapp",svgClass:"share__icon"})})]})]})}}}]);
//# sourceMappingURL=796.1044eca2.chunk.js.map